(this.webpackJsonpsuperhero=this.webpackJsonpsuperhero||[]).push([[0],{119:function(e,t,a){},244:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(39),c=a.n(r),s=a(12),i=(a(118),a(119),a(7)),l=a(10);function o(){var e=window.localStorage.getItem("token"),t=Object(i.g)(),a=Object(n.useState)(e),r=Object(l.a)(a,2),c=r[0],s=r[1];return{token:c,logIn:function(e){window.localStorage.setItem("token",e),s(e)},logOut:function(){window.localStorage.setItem("token",""),s("")},isAuth:function(){return!!c},redirectToLogIn:function(){t.push("/login")}}}var j=a(255),d=a(263),b=a(256),h=a(257),u=a(111),m=a(18),O=a.n(m),x=a(27),p=a(260),g=a(254),v=a(59),f=a(34),w=a(56),y=a.n(w),N=y.a.create({baseURL:"http://challenge-react.alkemy.org/"}),k=y.a.create({baseURL:"https://superheroapi.com/api.php/".concat("4695976300416765")}),I=(a(244),a(1));var S=function(e){var t=e.submitFn,a=e.loadingFn,n=Object(v.a)({initialValues:{heroName:""},validationSchema:f.a({heroName:f.b().max(30,"Must be 30 characters or less").required("Required")}),onSubmit:function(){var e=Object(x.a)(O.a.mark((function e(r){var c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.heroName,a(!0),e.prev=2,e.next=5,k.get("/search/".concat(c));case 5:if(200!==(s=e.sent).status){e.next=10;break}t(s.data.results),e.next=11;break;case 10:throw new Error(s.data);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.errors.heroName="Error searching heroes, please try again.";case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()});return Object(I.jsxs)(p.a,{className:"hero-search-form d-flex",noValidate:!0,onSubmit:n.handleSubmit,children:[Object(I.jsx)(p.a.Control,{type:"text",placeholder:"Enter hero name",name:"heroName",onChange:n.handleChange,onBlur:n.handleBlur,value:n.values.heroName,isInvalid:!!n.errors.heroName}),Object(I.jsx)(g.a,{variant:"primary",type:"submit",children:"Buscar"}),Object(I.jsx)(p.a.Control.Feedback,{type:"invalid",className:"hero-search-form-feedback",children:n.errors.heroName})]})},C=a(264);function F(){var e=window.localStorage.getItem("team");return e?JSON.parse(e):[]}function T(e){return F().indexOf(e)>=0}function L(e){if(!T(e))return"Hero does not belong to team";var t=F();return t=t.filter((function(t){return t!==e})),window.localStorage.setItem("team",JSON.stringify(t)),!0}a(247);var B=function(e){var t=e.id,a=e.name,n=e.image,r=e.actions;return Object(I.jsxs)(C.a,{className:"hero-card text-dark mb-3",style:{width:"12rem"},children:[Object(I.jsx)(C.a.Img,{className:"hero-image",variant:"top",src:n}),Object(I.jsxs)(C.a.Body,{children:[Object(I.jsx)(C.a.Title,{className:"text-center",children:a}),T(t)?Object(I.jsx)(g.a,{className:"hover-button remove-button",type:"button",onClick:function(){return r.removeFromTeam({id:t,name:a})},children:"- Remove"}):Object(I.jsx)(g.a,{className:"hover-button add-button",type:"button",onClick:function(){return r.addToTeam({id:t,name:a,image:n})},children:"+ Add"})]})]})};a(248);var E=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(l.a)(c,2),i=s[0],m=s[1],O=Object(n.useState)(null),x=Object(l.a)(O,2),p=x[0],g=x[1],v=o(),f=v.isAuth,w=v.redirectToLogIn;f()||w();var y=function(e){var t=function(e){var t=F();return T(e)?"Hero already in team":t.length>=6?"Team already full":(t.push(e),window.localStorage.setItem("team",JSON.stringify(t)),!0)}(e.id);g(!0===t?{type:"success",text:"".concat(e.name," added to team")}:{type:"danger",text:t})},N=function(e){var t=L(e.id);g(!0===t?{type:"success",text:"".concat(e.name," removed from team")}:{type:"danger",text:t})};return Object(I.jsxs)(j.a,{className:"hero-search-page",children:[p&&Object(I.jsx)(d.a,{className:"hero-search-page-alert",variant:p.type,onClose:function(){return g(null)},dismissible:!0,children:p.text}),Object(I.jsx)("h1",{className:"mb-5",children:"Hero Search"}),Object(I.jsx)(b.a,{className:"mb-5",children:Object(I.jsx)(S,{submitFn:function(e){e?(g(null),r(e)):(g({type:"danger",text:"No heroes found"}),r(null)),m(!1)},loadingFn:m})}),Object(I.jsx)(b.a,{className:"justify-content-center",children:i?Object(I.jsx)(h.a,{animation:"grow",variant:"primary"}):a&&a.map((function(e){return Object(I.jsx)(u.a,{children:Object(I.jsx)(B,{id:e.id,name:e.name,image:e.image.url,actions:{addToTeam:y,removeFromTeam:N}})},e.id)}))})]})};var A=function(e){var t=e.logInFn,a=Object(i.g)(),n=Object(v.a)({initialValues:{email:"",password:""},validationSchema:f.a({email:f.b().email("Invalid email address").required("Required"),password:f.b().max(15,"Must be 15 characters or less").required("Required")}),onSubmit:function(){var e=Object(x.a)(O.a.mark((function e(r){var c,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.email,s=r.password,e.prev=1,e.next=4,N.post("",{email:c,password:s});case 4:if(200!==(i=e.sent).status){e.next=10;break}t(i.data.token),a.push("/"),e.next=11;break;case 10:throw new Error(i.data);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),"challenge@alkemy.org"===c&&"react"===s?(t("13456"),a.push("/")):(n.errors.email="Invalid email. Try 'challenge@alkemy.org'",n.errors.password="Invalid password. Try 'react'");case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()});return Object(I.jsx)("div",{className:"log-in-form",children:Object(I.jsxs)(p.a,{noValidate:!0,onSubmit:n.handleSubmit,children:[Object(I.jsxs)(p.a.Group,{controlId:"email",children:[Object(I.jsx)(p.a.Label,{children:"Email address"}),Object(I.jsx)(p.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:n.handleChange,onBlur:n.handleBlur,value:n.values.email,isInvalid:!!n.errors.email}),Object(I.jsx)(p.a.Control.Feedback,{type:"invalid",children:n.errors.email})]}),Object(I.jsxs)(p.a.Group,{controlId:"password",children:[Object(I.jsx)(p.a.Label,{children:"Password"}),Object(I.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:n.handleChange,onBlur:n.handleBlur,value:n.values.password,isInvalid:!!n.errors.password}),Object(I.jsx)(p.a.Control.Feedback,{type:"invalid",children:n.errors.password})]}),Object(I.jsx)(g.a,{variant:"primary",type:"submit",children:"Enviar"})]})})};var P=function(e){var t=e.logInFn;return Object(I.jsxs)(j.a,{children:[Object(I.jsx)("h1",{className:"mb-5",children:"Log In"}),Object(I.jsx)(b.a,{className:"justify-content-center",children:Object(I.jsx)(A,{logInFn:t})})]})},R=(a(249),a(258));a(250);var q=function(e){var t=e.powerstats;return Object(I.jsx)(R.a,{className:"powerstats",hover:!0,size:"sm",children:Object(I.jsxs)("tbody",{children:[Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{className:"table-row-title",children:"Intelligence"}),Object(I.jsx)("td",{children:"null"===t.intelligence?"unknown":t.intelligence}),Object(I.jsx)("td",{className:"table-row-title",children:"Strength"}),Object(I.jsx)("td",{children:"null"===t.strength?"unknown":t.strength})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{className:"table-row-title",children:"Speed"}),Object(I.jsx)("td",{children:"null"===t.speed?"unknown":t.speed}),Object(I.jsx)("td",{className:"table-row-title",children:"Durability"}),Object(I.jsx)("td",{children:"null"===t.durability?"unknown":t.durability})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{className:"table-row-title",children:"Power"}),Object(I.jsx)("td",{children:"null"===t.power?"unknown":t.power}),Object(I.jsx)("td",{className:"table-row-title",children:"Combat"}),Object(I.jsx)("td",{children:"null"===t.combat?"unknown":t.combat})]})]})})};var H=function(e){var t=e.id,a=e.name,n=e.image,r=e.powerstats,c=e.actions;return Object(I.jsxs)(C.a,{className:"team-item mb-5",children:[Object(I.jsx)(C.a.Img,{className:"team-item-image",variant:"top",src:n}),Object(I.jsxs)(C.a.Body,{children:[Object(I.jsx)(C.a.Title,{children:a}),Object(I.jsx)(q,{powerstats:r}),Object(I.jsx)(s.b,{className:"btn btn-outline-dark btn-sm mr-1",to:"/hero/".concat(t),children:"Details"}),Object(I.jsx)(g.a,{variant:"outline-danger",size:"sm",onClick:function(){return c.delete(t)},children:"Remove"})]})]})};var J=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!0),i=Object(l.a)(c,2),m=i[0],p=i[1],g=Object(n.useState)(null),v=Object(l.a)(g,2),f=v[0],w=v[1],y=o(),N=y.isAuth,S=y.redirectToLogIn;Object(n.useEffect)((function(){if(N()){var e=F();(function(){var t=Object(x.a)(O.a.mark((function t(){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(e.map((function(e){return k.get("/".concat(e))})));case 3:a=t.sent,r(a.map((function(e){return e.data}))),p(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),w({text:"There was an error retrieving the team. Please try again later."});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}else S()}),[]);var C=function(e){L(e),r((function(t){return t.filter((function(t){return t.id!==e}))}))};return f?Object(I.jsxs)(j.a,{className:"team-page",children:[Object(I.jsx)("h1",{className:"mb-5",children:"Team"}),Object(I.jsx)(b.a,{className:"justify-content-center",children:Object(I.jsx)(d.a,{variant:"danger",children:f.text})})]}):Object(I.jsxs)(j.a,{className:"team-page",children:[Object(I.jsx)("h1",{className:"mb-5",children:"Team"}),Object(I.jsxs)(b.a,{className:"justify-content-center",children:[m&&Object(I.jsx)(h.a,{animation:"grow",variant:"primary"}),a&&a.map((function(e){var t;return Object(I.jsx)(u.a,{children:Object(I.jsx)(H,{id:e.id,name:e.name,image:null===(t=e.image)||void 0===t?void 0:t.url,powerstats:e.powerstats,actions:{delete:C}})},e.id)})),a&&0===a.length&&Object(I.jsxs)("p",{children:["Your team is empty, add heroes"," ",Object(I.jsx)(s.b,{to:"/search",children:"here"}),"."]})]})]})},K=a(259);a(251);var V=function(){var e=Object(i.h)().id,t=Object(n.useState)(null),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(null),m=Object(l.a)(s,2),p=m[0],g=m[1],v=o(),f=v.isAuth,w=v.redirectToLogIn;return Object(n.useEffect)((function(){f()?function(){var t=Object(x.a)(O.a.mark((function t(){var a,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.get("/".concat(e));case 3:a=t.sent,n={name:a.data.name,aliases:a.data.biography.aliases,eyeColor:a.data.appearance["eye-color"],hairColor:a.data.appearance["hair-color"],height:a.data.appearance.height[1],weight:a.data.appearance.weight[1],placeOfWork:a.data.work.base,image:a.data.image.url},c(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),g({text:"Hero not found"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()():w()}),[]),p?Object(I.jsx)(j.a,{children:Object(I.jsx)(b.a,{className:"justify-content-center mt-5",children:Object(I.jsx)(d.a,{variant:"danger",children:p.text})})}):r?Object(I.jsxs)(j.a,{className:"hero-details-page",children:[Object(I.jsx)("h1",{className:"mb-3",children:r.name}),Object(I.jsxs)(b.a,{className:"justify-content-center",children:[Object(I.jsx)(u.a,{xs:12,sm:4,children:Object(I.jsx)(K.a,{className:"hero-details-page-image mb-3",src:r.image,alt:r.name})}),Object(I.jsx)(u.a,{xs:12,sm:8,children:Object(I.jsx)(R.a,{striped:!0,bordered:!0,hover:!0,className:"hero-details-page-table",children:Object(I.jsxs)("tbody",{children:[Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Aliases"}),Object(I.jsx)("td",{children:r.aliases.join(", ")})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Height"}),Object(I.jsx)("td",{children:r.height})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Weight"}),Object(I.jsx)("td",{children:r.weight})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Eye Color"}),Object(I.jsx)("td",{children:r.eyeColor})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Hair Color"}),Object(I.jsx)("td",{children:r.hairColor})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Place of Work"}),Object(I.jsx)("td",{children:r.placeOfWork})]})]})})})]})]}):Object(I.jsx)(j.a,{children:Object(I.jsx)(b.a,{className:"justify-content-center mt-5",children:Object(I.jsx)(h.a,{animation:"grow",variant:"primary"})})})},W=a(262),D=a(261);function z(e){var t=e.token,a=e.logOutFn,n=Object(i.g)();return Object(I.jsxs)(W.a,{className:"mb-3",bg:"light",expand:"lg",children:[Object(I.jsxs)(W.a.Brand,{as:s.b,to:"/",children:[" ",Object(I.jsx)("img",{alt:"",src:"/superhero/logo256.png",width:"32",height:"32",className:"d-inline-block align-top mr-1"})," ","Superhero Hunter"]}),Object(I.jsx)(W.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(I.jsx)(W.a.Collapse,{id:"basic-navbar-nav",children:Object(I.jsx)(D.a,{defaultActiveKey:t?"/team":"/login",children:t?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(D.a.Item,{children:Object(I.jsx)(D.a.Link,{eventKey:"/team",as:s.b,to:"/team",children:"Team"})}),Object(I.jsx)(D.a.Item,{children:Object(I.jsx)(D.a.Link,{eventKey:"/search",as:s.b,to:"/search",children:"Search heroes"})}),Object(I.jsx)(D.a.Item,{children:Object(I.jsx)(D.a.Link,{eventKey:"/logout",onClick:function(){a(),n.push("/")},children:"Log out"})})]}):Object(I.jsx)(D.a.Item,{children:Object(I.jsx)(D.a.Link,{eventKey:"/login",as:s.b,to:"/login",children:"Log in"})})})})]})}z.defaultProps={token:""};var G=z,M=a(8),U=a.n(M);function Y(e){var t=e.logOutFn,a=Object(i.g)();return t(""),a.push("/"),null}Y.propTypes={logOutFn:U.a.func.isRequired};var Q=Y;var X=function(){var e=o(),t=e.token,a=e.logIn,n=e.logOut;return Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)("header",{className:"App-header",children:Object(I.jsx)(G,{token:t,logOutFn:n})}),Object(I.jsx)("main",{children:Object(I.jsxs)(i.d,{children:[Object(I.jsx)(i.b,{path:"/login",children:Object(I.jsx)(P,{logInFn:a})}),Object(I.jsx)(i.b,{path:"/logout",children:Object(I.jsx)(Q,{logOutFn:n})}),Object(I.jsx)(i.b,{path:"/team",children:Object(I.jsx)(J,{})}),Object(I.jsx)(i.b,{path:"/search",children:Object(I.jsx)(E,{})}),Object(I.jsx)(i.b,{path:"/hero/:id",children:Object(I.jsx)(V,{})}),Object(I.jsx)(i.b,{path:"/",children:Object(I.jsx)(i.a,{to:"/team"})})]})})]})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,265)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};c.a.render(Object(I.jsx)(s.a,{basename:"/",children:Object(I.jsx)(X,{})}),document.getElementById("root")),Z()}},[[252,1,2]]]);
//# sourceMappingURL=main.93dfb869.chunk.js.map