(this.webpackJsonpsuperhero=this.webpackJsonpsuperhero||[]).push([[0],{119:function(e,t,a){},244:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(39),c=a.n(n),s=a(13),i=(a(118),a(119),a(7)),l=a(10);function o(){var e=window.localStorage.getItem("token"),t=Object(i.g)(),a=Object(r.useState)(e),n=Object(l.a)(a,2),c=n[0],s=n[1];return{token:c,storeToken:function(e){window.localStorage.setItem("token",e),s(e)},isAuth:function(){return!!c},redirectToLogIn:function(){t.push("/login")}}}var j=a(255),d=a(263),b=a(256),h=a(257),u=a(111),m=a(18),x=a.n(m),O=a(27),p=a(260),g=a(254),v=a(59),f=a(34),w=a(56),y=a.n(w),k=y.a.create({baseURL:"http://challenge-react.alkemy.org/"}),N=y.a.create({baseURL:"https://superheroapi.com/api.php/".concat("4695976300416765")}),S=(a(244),a(1));var T=function(e){var t=e.submitFn,a=e.loadingFn,r=Object(v.a)({initialValues:{heroName:""},validationSchema:f.a({heroName:f.b().max(30,"Must be 30 characters or less").required("Required")}),onSubmit:function(){var e=Object(O.a)(x.a.mark((function e(n){var c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.heroName,a(!0),e.prev=2,e.next=5,N.get("/search/".concat(c));case 5:if(200!==(s=e.sent).status){e.next=10;break}t(s.data.results),e.next=11;break;case 10:throw new Error(s.data);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.errors.heroName="Error searching heroes, please try again.";case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()});return Object(S.jsxs)(p.a,{className:"hero-search-form d-flex",noValidate:!0,onSubmit:r.handleSubmit,children:[Object(S.jsx)(p.a.Control,{type:"text",placeholder:"Enter hero name",name:"heroName",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.heroName,isInvalid:!!r.errors.heroName}),Object(S.jsx)(g.a,{variant:"primary",type:"submit",children:"Buscar"}),Object(S.jsx)(p.a.Control.Feedback,{type:"invalid",className:"hero-search-form-feedback",children:r.errors.heroName})]})},C=a(264);function I(){var e=window.localStorage.getItem("team");return e?JSON.parse(e):[]}function L(e){return I().indexOf(e)>=0}function F(e){if(!L(e))return"Hero does not belong to team";var t=I();return t=t.filter((function(t){return t!==e})),window.localStorage.setItem("team",JSON.stringify(t)),!0}a(247);var B=function(e){var t=e.id,a=e.name,r=e.image,n=e.actions;return Object(S.jsxs)(C.a,{className:"hero-card text-dark mb-3",style:{width:"12rem"},children:[Object(S.jsx)(C.a.Img,{className:"hero-image",variant:"top",src:r}),Object(S.jsxs)(C.a.Body,{children:[Object(S.jsx)(C.a.Title,{className:"text-center",children:a}),L(t)?Object(S.jsx)(g.a,{className:"hover-button remove-button",type:"button",onClick:function(){return n.removeFromTeam({id:t,name:a})},children:"- Remove"}):Object(S.jsx)(g.a,{className:"hover-button add-button",type:"button",onClick:function(){return n.addToTeam({id:t,name:a,image:r})},children:"+ Add"})]})]})};a(248);var E=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),s=Object(l.a)(c,2),i=s[0],m=s[1],x=Object(r.useState)(null),O=Object(l.a)(x,2),p=O[0],g=O[1],v=o(),f=v.isAuth,w=v.redirectToLogIn;f()||w();var y=function(e){var t=function(e){var t=I();return L(e)?"Hero already in team":t.length>=6?"Team already full":(t.push(e),window.localStorage.setItem("team",JSON.stringify(t)),!0)}(e.id);g(!0===t?{type:"success",text:"".concat(e.name," added to team")}:{type:"danger",text:t})},k=function(e){var t=F(e.id);g(!0===t?{type:"success",text:"".concat(e.name," removed from team")}:{type:"danger",text:t})};return Object(S.jsxs)(j.a,{className:"hero-search-page",children:[p&&Object(S.jsx)(d.a,{className:"hero-search-page-alert",variant:p.type,onClose:function(){return g(null)},dismissible:!0,children:p.text}),Object(S.jsx)("h1",{className:"mb-5",children:"Hero Search"}),Object(S.jsx)(b.a,{className:"mb-5",children:Object(S.jsx)(T,{submitFn:function(e){e?(g(null),n(e)):g({type:"danger",text:"No heroes found"}),m(!1)},loadingFn:m})}),Object(S.jsx)(b.a,{className:"justify-content-center",children:i?Object(S.jsx)(h.a,{animation:"grow",variant:"primary"}):a&&a.map((function(e){return Object(S.jsx)(u.a,{children:Object(S.jsx)(B,{id:e.id,name:e.name,image:e.image.url,actions:{addToTeam:y,removeFromTeam:k}})},e.id)}))})]})};var A=function(e){var t=e.storeToken,a=Object(i.g)(),r=Object(v.a)({initialValues:{email:"",password:""},validationSchema:f.a({email:f.b().email("Invalid email address").required("Required"),password:f.b().max(15,"Must be 15 characters or less").required("Required")}),onSubmit:function(){var e=Object(O.a)(x.a.mark((function e(n){var c,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.email,s=n.password,e.prev=1,e.next=4,k.post("",{email:c,password:s});case 4:if(200!==(i=e.sent).status){e.next=10;break}t(i.data.token),a.push("/"),e.next=11;break;case 10:throw new Error(i.data);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),r.errors.email="Invalid email. Try 'challenge@alkemy.org'",r.errors.password="Invalid password. Try 'react'";case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()});return Object(S.jsx)("div",{className:"log-in-form",children:Object(S.jsxs)(p.a,{noValidate:!0,onSubmit:r.handleSubmit,children:[Object(S.jsxs)(p.a.Group,{controlId:"email",children:[Object(S.jsx)(p.a.Label,{children:"Email address"}),Object(S.jsx)(p.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.email,isInvalid:!!r.errors.email}),Object(S.jsx)(p.a.Control.Feedback,{type:"invalid",children:r.errors.email})]}),Object(S.jsxs)(p.a.Group,{controlId:"password",children:[Object(S.jsx)(p.a.Label,{children:"Password"}),Object(S.jsx)(p.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.password,isInvalid:!!r.errors.password}),Object(S.jsx)(p.a.Control.Feedback,{type:"invalid",children:r.errors.password})]}),Object(S.jsx)(g.a,{variant:"primary",type:"submit",children:"Enviar"})]})})};var P=function(e){var t=e.storeToken;return Object(S.jsxs)(j.a,{children:[Object(S.jsx)("h1",{className:"mb-5",children:"Log In"}),Object(S.jsx)(b.a,{className:"justify-content-center",children:Object(S.jsx)(A,{storeToken:t})})]})},H=(a(249),a(258));a(250);var R=function(e){var t=e.powerstats;return Object(S.jsx)(H.a,{className:"powerstats",hover:!0,size:"sm",children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-row-title",children:"Intelligence"}),Object(S.jsx)("td",{children:"null"===t.intelligence?"unknown":t.intelligence}),Object(S.jsx)("td",{className:"table-row-title",children:"Strength"}),Object(S.jsx)("td",{children:"null"===t.strength?"unknown":t.strength})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-row-title",children:"Speed"}),Object(S.jsx)("td",{children:"null"===t.speed?"unknown":t.speed}),Object(S.jsx)("td",{className:"table-row-title",children:"Durability"}),Object(S.jsx)("td",{children:"null"===t.durability?"unknown":t.durability})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-row-title",children:"Power"}),Object(S.jsx)("td",{children:"null"===t.power?"unknown":t.power}),Object(S.jsx)("td",{className:"table-row-title",children:"Combat"}),Object(S.jsx)("td",{children:"null"===t.combat?"unknown":t.combat})]})]})})};var q=function(e){var t=e.id,a=e.name,r=e.image,n=e.powerstats,c=e.actions;return Object(S.jsxs)(C.a,{className:"team-item mb-5",children:[Object(S.jsx)(C.a.Img,{className:"team-item-image",variant:"top",src:r}),Object(S.jsxs)(C.a.Body,{children:[Object(S.jsx)(C.a.Title,{children:a}),Object(S.jsx)(R,{powerstats:n}),Object(S.jsx)(s.b,{className:"btn btn-outline-dark btn-sm mr-1",to:"/hero/".concat(t),children:"Details"}),Object(S.jsx)(g.a,{variant:"outline-danger",size:"sm",onClick:function(){return c.delete(t)},children:"Remove"})]})]})};var J=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!0),s=Object(l.a)(c,2),i=s[0],m=s[1],p=Object(r.useState)(null),g=Object(l.a)(p,2),v=g[0],f=g[1],w=o(),y=w.isAuth,k=w.redirectToLogIn;Object(r.useEffect)((function(){if(y()){var e=I();(function(){var t=Object(O.a)(x.a.mark((function t(){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(e.map((function(e){return N.get("/".concat(e))})));case 3:a=t.sent,n(a.map((function(e){return e.data}))),m(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),f({text:"There was an error retrieving the team. Please try again later."});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}else k()}),[]);var T=function(e){F(e),n((function(t){return t.filter((function(t){return t.id!==e}))}))};return v?Object(S.jsxs)(j.a,{className:"team-page",children:[Object(S.jsx)("h1",{className:"mb-5",children:"Team"}),Object(S.jsx)(b.a,{className:"justify-content-center",children:Object(S.jsx)(d.a,{variant:"danger",children:v.text})})]}):Object(S.jsxs)(j.a,{className:"team-page",children:[Object(S.jsx)("h1",{className:"mb-5",children:"Team"}),Object(S.jsxs)(b.a,{className:"justify-content-center",children:[i&&Object(S.jsx)(h.a,{animation:"grow",variant:"primary"}),a&&a.map((function(e){var t;return Object(S.jsx)(u.a,{children:Object(S.jsx)(q,{id:e.id,name:e.name,image:null===(t=e.image)||void 0===t?void 0:t.url,powerstats:e.powerstats,actions:{delete:T}})},e.id)}))]})]})},K=a(259);a(251);var V=function(){var e=Object(i.h)().id,t=Object(r.useState)(null),a=Object(l.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(null),m=Object(l.a)(s,2),p=m[0],g=m[1],v=o(),f=v.isAuth,w=v.redirectToLogIn;return Object(r.useEffect)((function(){f()?function(){var t=Object(O.a)(x.a.mark((function t(){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.get("/".concat(e));case 3:a=t.sent,r={name:a.data.name,aliases:a.data.biography.aliases,eyeColor:a.data.appearance["eye-color"],hairColor:a.data.appearance["hair-color"],height:a.data.appearance.height[1],weight:a.data.appearance.weight[1],placeOfWork:a.data.work.base,image:a.data.image.url},c(r),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),g({text:"Hero not found"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()():w()}),[]),p?Object(S.jsx)(j.a,{children:Object(S.jsx)(b.a,{className:"justify-content-center mt-5",children:Object(S.jsx)(d.a,{variant:"danger",children:p.text})})}):n?Object(S.jsxs)(j.a,{className:"hero-details-page",children:[Object(S.jsx)("h1",{className:"mb-3",children:n.name}),Object(S.jsxs)(b.a,{className:"justify-content-center",children:[Object(S.jsx)(u.a,{xs:12,sm:4,children:Object(S.jsx)(K.a,{className:"hero-details-page-image mb-3",src:n.image,alt:n.name})}),Object(S.jsx)(u.a,{xs:12,sm:8,children:Object(S.jsx)(H.a,{striped:!0,bordered:!0,hover:!0,className:"hero-details-page-table",children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Aliases"}),Object(S.jsx)("td",{children:n.aliases.join(", ")})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Height"}),Object(S.jsx)("td",{children:n.height})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Weight"}),Object(S.jsx)("td",{children:n.weight})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Eye Color"}),Object(S.jsx)("td",{children:n.eyeColor})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Hair Color"}),Object(S.jsx)("td",{children:n.hairColor})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Place of Work"}),Object(S.jsx)("td",{children:n.placeOfWork})]})]})})})]})]}):Object(S.jsx)(j.a,{children:Object(S.jsx)(b.a,{className:"justify-content-center mt-5",children:Object(S.jsx)(h.a,{animation:"grow",variant:"primary"})})})},W=a(262),D=a(261);function z(e){var t=e.token;return Object(S.jsxs)(W.a,{className:"mb-3",bg:"light",expand:"lg",children:[Object(S.jsxs)(W.a.Brand,{as:s.b,to:"/",children:[" ",Object(S.jsx)("img",{alt:"",src:"/logo256.png",width:"32",height:"32",className:"d-inline-block align-top mr-1"})," ","Superhero Hunter"]}),Object(S.jsx)(W.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(W.a.Collapse,{id:"basic-navbar-nav",children:Object(S.jsx)(D.a,{defaultActiveKey:t?"/team":"/login",children:t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(D.a.Item,{children:Object(S.jsx)(D.a.Link,{eventKey:"/team",as:s.b,to:"/team",children:"Team"})}),Object(S.jsx)(D.a.Item,{children:Object(S.jsx)(D.a.Link,{eventKey:"/search",as:s.b,to:"/search",children:"Search heroes"})}),Object(S.jsx)(D.a.Item,{children:Object(S.jsx)(D.a.Link,{eventKey:"/logout",as:s.b,to:"/logout",children:"Log out"})})]}):Object(S.jsx)(D.a.Item,{children:Object(S.jsx)(D.a.Link,{eventKey:"/login",as:s.b,to:"/login",children:"Log in"})})})})]})}z.defaultProps={token:""};var G=z;var M=function(e){return(0,e.storeToken)(""),Object(S.jsx)(i.a,{to:"/"})};var U=function(){var e=o(),t=e.token,a=e.storeToken;return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("header",{className:"App-header",children:Object(S.jsx)(G,{token:t})}),Object(S.jsx)("main",{children:Object(S.jsxs)(i.d,{children:[Object(S.jsx)(i.b,{path:"/login",children:Object(S.jsx)(P,{storeToken:a})}),Object(S.jsx)(i.b,{path:"/logout",children:Object(S.jsx)(M,{storeToken:a})}),Object(S.jsx)(i.b,{path:"/team",children:Object(S.jsx)(J,{})}),Object(S.jsx)(i.b,{path:"/search",children:Object(S.jsx)(E,{})}),Object(S.jsx)(i.b,{path:"/hero/:id",children:Object(S.jsx)(V,{})}),Object(S.jsx)(i.b,{path:"/",exact:!0,children:Object(S.jsx)(i.a,{to:"/team"})})]})})]})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,265)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};c.a.render(Object(S.jsx)(s.a,{children:Object(S.jsx)(U,{})}),document.getElementById("root")),Q()}},[[252,1,2]]]);
//# sourceMappingURL=main.525d136a.chunk.js.map